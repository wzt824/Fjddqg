!function(e){function t(){return"placeholder"in document.createElement("input")}function i(e){$(e).index();var t=n[$(e).index()];$(e).css("color",t)}function r(t){a.additinal;var i,r=document.getElementById(t).value;if((r=r.replace(/^\s*(.*?)\s*$/,"$1")).length>100&&(r=r.substring(0,100)),""!=r){void 0!==e.pageConfig&&void 0!==e.pageConfig.searchType&&e.pageConfig.searchType;var n="string"==typeof a.cid?a.cid:"",l="string"==typeof a.cLevel?a.cLevel:"";"string"==typeof a.ev_val&&a.ev_val;if("string"==typeof n&&""!=n&&"string"==typeof l){l="-1"==l?"":/^(?:[1-8])?([1-3])$/.test(l)?RegExp.$1:""}r=encodeURIComponent(r),i="//search.jd.hk/Search?keyword={keyword}&enc=utf-8".replace(/\{keyword}/,r),i=i.replace(/\{enc}/,"utf-8"),0==o.isSubmited&&(setTimeout(function(){o.isSubmited=!1,e.location.href=i},10),o.isSubmited=!0)}else e.location.href=e.location.href}var o={debug:!1,isSubmited:!1},n=[];placeholder=function(e){e=e||"#a9a4a8";var r=$("#search-2014 #key");if(!t())for(var o=r.length,a=0;a<o;a++){var l=r[a],c=$(l).attr("placeholder");""==$(l).val()&&null!=c&&($(l).val(c),n[a]=$(l).css("color"),$(l).css("color",e))}r.focus(function(){null!=$(this).attr("placeholder")&&$(this).val()==$(this).attr("placeholder")&&($(this).val(""),i(this))}).blur(function(){null==$(this).attr("placeholder")||""!=$(this).val()&&$(this).val()!=$(this).attr("placeholder")||$(this).hasClass("shutdown")||($(this).val($(this).attr("placeholder")),$(this).css("color",e))})};var a=function(){};a.prototype.addSearchEvent=function(){$("#search-2014 .form .action-search-worldwide, #nav-mygb .form button").unbind("click").bind("click",function(){r($(this).parent().find("input").attr("id"))}),$("#search-2014 .form input, #nav-mygb .form input").unbind("keydown").bind("keydown",function(e){13==e.keyCode&&r($(this).attr("id"))})},a.prototype.init=function(t){for(var i="",r=t.logoRightAd,o=t.indexTopSearchPlaceHolderText||[{text:""}],n=t.indexTopSearchKeyWords||[],a=$("#search-2014"),l=a.find("#key"),c=a.find("#hotwords-2014"),d=0;d<n.length;d++){var s=n[d];i+='<a href="'+s.linkText+'" target="_blank" class="style-red">'+s.text+"</a>"}l.attr({placeholder:o[0].text,value:o[0].text}),c.html(i);var h=$("#logoRightAd");if(r&&r.length>0?(r=r[0],h.attr("href",r.linkText),h.children("img").attr("src",r.actImg)):h.remove(),this.addSearchEvent(),placeholder(),e.worldwide&&e.worldwide.config){var f=e.worldwide.config.step||0,p=$("#cjProcessBar");if(p.length>0){steps=p.find(".cj-step");for(d=0;d<=f;d++)$(steps[d]).addClass("active")}}},e.worldwide=e.worldwide||{},e.worldwide.search=new a}(window);